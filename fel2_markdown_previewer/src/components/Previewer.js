import React from 'react'
import { marked } from 'marked';

console.log('watermelon4');

// See "Core API" section of highlight.js docs, e.g.,  highlightjs.readthedocs.io/en/latest/api.html#highlightall.

// In index.css, we targeted:
//  .previewer pre code {
//   font-weight: bold;
//   background-color: white;
// }
// apparently, <code> is an html tag, generated by three backticks, and <pre> is a block of preformatted text, which preserves the formatting ignored by web browsers.  You'll notice that, outside of preformatted blocks, Markdown ignores a second space after a period, and who knows what else.  

// If you wanna write some Markdown, see this: https://www.markdownguide.org/cheat-sheet/

marked.setOptions({
  renderer: new marked.Renderer(),
  highlight: function(code, lang) {
    const hljs = require('highlight.js');
    const language = hljs.getLanguage(lang) ? lang : 'plaintext';
    return hljs.highlight(code, { language }).value;
  },
  langPrefix: 'hljs language-', // highlight.js css expects a top-level 'hljs' class.
  pedantic: false,
  gfm: true,
  breaks: true,
  sanitize: false,
  smartypants: false,
  xhtml: false
});


const Previewer = ({stuffAsProps}) => {

  const dummy = marked.parse(stuffAsProps);

  return (
    <div className='preview_container'> 
      <div 
        id="preview" 
        className='previewer' 
        dangerouslySetInnerHTML={{ __html: dummy}}
      />

    </div>
  );
 }


export default Previewer;

